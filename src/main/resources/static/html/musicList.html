<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>音乐信息</title>
    <link rel="stylesheet" href="../layui/css/layui.css" media="all">
    <script type="text/javascript" src="../jquery/jquery-3.4.1.min.js"></script>
</head>
<body>
<table class="layui-hide" id="musicInfo"></table>
<script src="../layui/layui.js"></script>
<script type="text/html" id="SerialNumber">
    {{d.LAY_TABLE_INDEX+1}}
</script>
<script type="text/html" id="play">
    <i onclick="getMusic('{{d}}')" class="layui-icon layui-icon-headset" style="font-size: 1.6rem; color: #1E9FFF;"></i>
</script>
<script>
layui.use('table', function(){
    var table = layui.table;

    table.render({
        elem: '#musicInfo'
        ,url:'../../app/open/search?types=search&count=20&source=netease&pages=1&name=别知己'
        ,toolbar: true
        ,title: '用户数据表'
        ,totalRow: true
        ,cols: [[
            {field:'SerialNumber', width:80, title: '序号',fixed: 'left',templet:'#SerialNumber'}
            , {field: 'name', title: '歌曲名',}
            , {field: 'album', title: '唱片集'}
            , {field: 'artist', title: '歌手'}
            , {field:'play', title:'操作',templet: '#play', min: true}
        ]]
        ,page: true
        ,response: {
            statusCode: 200 //重新规定成功的状态码为 200，table 组件默认为 0
        }
        ,parseData: function(res){ //将原始数据解析成 table 组件所规定的数据
            return {
                "code": res.code, //解析接口状态
                "msg": res.msg, //解析提示文本
                "count": res.total, //解析数据长度
                "data": res.result.data //解析数据列表
            };
        }
    });
});
    
function getMusic(res) {
    $("#audioMusic").attr("src",res.url);
    parent.ONOFF();
}
</script>
</body>
</html>